<StyleSheet Resource="BudgetTracker.css" Assembly="GetType().Assembly" />

<StackLayout class="homeContainer">

    <Frame>
        <StackLayout>
            @if (_budget > 0)
            {
                <BudgetSummary Budget="_budget"
                               TotalExpenses="_expensesTotal"
                               CurrentBalance="_currentBalance" />
            }
            else
            {
                <SetBudget OnBudgetSet="@((newBudget) => _budget = newBudget)" />
            }
        </StackLayout>
    </Frame>

    @if (_budget > 0)
    {
        <Frame>
            <ScrollView>
                <StackLayout>
                    <Label Text="EXPENSES" />
                    <ExpenseList Expenses="_expenses" />
                    <CreateExpense OnExpenseAdded="@((newExpense) => _expenses.Add(newExpense))" />
                </StackLayout>
            </ScrollView>
        </Frame>
    }

</StackLayout>


@code {

    private decimal _budget;
    private List<Expense> _expenses = new List<Expense>();

    private decimal _currentBalance => _budget - _expenses.Sum(x => x.Amount);
    private decimal _expensesTotal => _expenses.Sum(x => x.Amount);

}
